{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function buildUrl(query, page) {\n  const API_KEY = '42458886-d6d62fa6987d6f72b0a5e97bb';\n  const URL = 'https://pixabay.com/api/';\n\n  const fetchGallery = await axios.get(URL, {\n    params: {\n      per_page: 15,\n      page: page,\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      safesearch: 'true',\n      orientation: 'horizontal',\n    },\n  });\n\n  return fetchGallery.data;\n}\n","export function renderGallery(images) {\n  return images\n    .map(\n      img =>\n        `\n        <li class=\"gallery-item\">\n          <div class=\"gallery-box item-card-wrapper\">\n            <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n              <img class=\"gallery-img\" src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\">\n            </a>\n            <div class=\"card-box\">\n              <div>\n                <p class=\"card-box-text\"><b>Likes</b></p>\n                <p class=\"card-box-text\">${img.likes}</p>\n              </div>\n              <div>\n                <p class=\"card-box-text\"><b>Views</b></p>\n                <p class=\"card-box-text\">${img.views}</p>\n              </div>\n              <div>\n                <p class=\"card-box-text\"><b>Comments</b></p>\n                <p class=\"card-box-text\">${img.comments}</p>\n              </div>\n              <div>\n                <p class=\"card-box-text\"><b>Downloads</b></p>\n                <p class=\"card-box-text\">${img.downloads}</p>\n              </div>\n            </div>\n          </div>\n        </li>`\n    )\n    .join('');\n}\n","'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { buildUrl } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.btn-more');\nlet currentPage = 1;\nlet searchQuery = null;\nlet isLoading = false;\nhideLoader();\nhideBtn();\nasync function fetchRequest(event) {\n  event.preventDefault();\n  searchQuery = document\n    .querySelector('.form input[name=\"query\"]')\n    .value.trim();\n  currentPage = 1;\n  gallery.innerHTML = '';\n  if (searchQuery === '') {\n    // Show warning message if no search query is entered\n    iziToast.warning({\n      message: 'Please enter a search query.',\n      messageColor: 'black',\n      backgroundColor: '#FFAC26',\n      position: 'topRight',\n      pauseOnHover: false,\n      progressBarColor: 'black',\n      timeout: 3000,\n    });\n    return;\n  }\n  showLoader();\n  isLoading = true;\n  try {\n    const data = await buildUrl(searchQuery, currentPage);\n    const images = data.hits;\n    if (images.length === 0) {\n      // Show error message if no images are found\n      iziToast.error({\n        theme: 'dark',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#FFFFFF',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        pauseOnHover: false,\n        progressBarColor: '#B51B1B',\n        timeout: 3000,\n      });\n    }\n    gallery.innerHTML = renderGallery(images);\n    if (images.length < 15) {\n      hideBtn();\n      iziToast.info({\n        theme: 'dark',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#FFFFFF',\n        backgroundColor: '#1F79FF',\n        position: 'topRight',\n        pauseOnHover: false,\n        progressBarColor: 'black',\n        timeout: 3000,\n      });\n    } else {\n      showBtn();\n    }\n    lightbox.refresh();\n  } catch {\n    // Show error message if there's an error during fetching\n    iziToast.error({\n      theme: 'dark',\n      message: 'Sorry, there was an error fetching images. Please try again!',\n      messageColor: '#FFFFFF',\n      backgroundColor: '#EF4040',\n      position: 'topRight',\n      pauseOnHover: false,\n      progressBarColor: '#B51B1B',\n      timeout: 3000,\n    });\n  } finally {\n    hideLoader();\n    isLoading = false;\n    document.querySelector('.form').reset();\n  }\n}\ndocument.querySelector('.form').addEventListener('submit', fetchRequest);\nloadMoreBtn.addEventListener('click', async () => {\n  if (isLoading) return;\n  try {\n    showLoader();\n    isLoading = true;\n    const data = await buildUrl(searchQuery, ++currentPage);\n    const images = data.hits;\n    gallery.insertAdjacentHTML('beforeend', renderGallery(images));\n    lightbox.refresh();\n    if (images.length < 15) {\n      hideBtn();\n      iziToast.info({\n        theme: 'dark',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#FFFFFF',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        pauseOnHover: false,\n        progressBarColor: 'black',\n        timeout: 3000,\n      });\n    }\n  } catch (error) {\n    throw new Error(error.status);\n  } finally {\n    hideLoader();\n    isLoading = false;\n  }\n});\nfunction showBtn() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\nfunction hideBtn() {\n  loadMoreBtn.classList.add('is-hidden');\n}\nfunction showLoader() {\n  loader.style.display = 'block';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n"],"names":["buildUrl","query","page","API_KEY","URL","axios","renderGallery","images","img","lightbox","SimpleLightbox","gallery","loader","loadMoreBtn","currentPage","searchQuery","isLoading","hideLoader","hideBtn","fetchRequest","event","iziToast","showLoader","showBtn","error"],"mappings":"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"}